# 辦公空間智能規劃平台

基於 ChatHouseDiffusion 技術，為商用辦公空間設計的智能規劃與分析平台。

## 核心功能

### 1. 平面圖智能分析
- 上傳辦公空間平面圖
- AI 自動辨識空間尺寸和結構
- 計算可用面積

### 2. 空間需求設定
- 設定工作站數量
- 設定會議室需求（小型/中型/大型）
- 設定公共設施（茶水間、接待區、儲藏室等）
- 實時預估所需面積

### 3. 智能配置方案
- AI 生成多種配置方案
- 可行性評分（0-100分）
- 詳細的空間利用率分析
- 智能建議和優化方向

### 4. 專案管理
- 多專案管理
- 版本歷史追蹤
- 方案比較

## 技術架構

### 前端
- **框架**: React 18 + TypeScript
- **建置工具**: Vite
- **路由**: React Router
- **狀態管理**: React Context

### 後端
- **資料庫**: Supabase (PostgreSQL)
- **認證**: Supabase Auth
- **儲存**: Supabase Storage
- **即時更新**: Supabase Realtime

### AI 引擎
- 基於 ChatHouseDiffusion 的擴散模型
- 空間配置演算法
- 可行性評估系統

## 快速開始

### 安裝依賴

```bash
npm install
```

### 環境變數設定

在 `.env` 檔案中設定 Supabase 連接資訊：

```env
VITE_SUPABASE_URL=your_supabase_url
VITE_SUPABASE_ANON_KEY=your_supabase_anon_key
```

### 開發模式

```bash
npm run dev
```

### 建置生產版本

```bash
npm run build
```

## 使用流程

### 1. 註冊/登入
首次使用需要註冊帳號，之後可直接登入。

### 2. 建立專案
點擊「新增專案」，輸入專案名稱和描述。

### 3. 上傳平面圖
- 拖曳或點擊上傳平面圖檔案
- 填寫平面圖名稱
- 選填總面積（有助於更準確的分析）

### 4. 設定空間需求
- 工作站數量：每個約 6 m²
- 會議室：
  - 小型（4-6人）：約 15 m²
  - 中型（8-10人）：約 25 m²
  - 大型（12+人）：約 40 m²
- 其他設施：電話亭、休息區、茶水間等

系統會即時計算預估所需面積，並提示空間是否充足。

### 5. 生成配置方案
- 點擊「儲存需求並生成配置方案」
- 系統會基於您的需求生成配置方案
- 可以生成多個方案進行比較

### 6. 查看分析結果
每個方案包含：
- **可行性評分**：0-100 分
- **配置結果**：實際可容納的工位和設施數量
- **空間利用率**：百分比顯示
- **AI 建議**：優化方向和注意事項

## 空間計算邏輯

### 基礎面積需求
- 工作站：6 m² / 個
- 小型會議室：15 m² / 間
- 中型會議室：25 m² / 間
- 大型會議室：40 m² / 間
- 電話亭：2 m² / 間
- 休息區：20 m² / 個
- 茶水間：15 m²
- 接待區：20 m²
- 儲藏室：10 m² / 間
- 機房：15 m²

### 循環空間加成
系統會自動加上 40% 的循環空間（走道、公共區域等），以確保實際使用的舒適度。

### 可行性評分標準
- **95分**：可用面積 ≥ 需求面積 × 1.2（非常寬裕）
- **85分**：可用面積 ≥ 需求面積 × 1.0（充足）
- **70分**：可用面積 ≥ 需求面積 × 0.9（略緊湊）
- **55分**：可用面積 ≥ 需求面積 × 0.8（緊湊）
- **40分以下**：空間不足

## 資料結構

### 專案 (projects)
- 專案名稱、描述、狀態
- 關聯到使用者

### 平面圖 (floor_plans)
- 原始圖檔、處理後圖檔
- 面積資訊、尺寸資訊
- 關聯到專案

### 空間需求 (space_requirements)
- 各類空間的數量需求
- 額外備註
- 關聯到平面圖

### 配置方案 (layout_solutions)
- 可行性評分
- 實際配置結果
- 利用率、建議
- 關聯到空間需求

## 安全性

- 所有資料表都啟用 Row Level Security (RLS)
- 使用者只能存取自己的專案和資料
- 平面圖檔案儲存在 Supabase Storage，有適當的存取控制

## 未來規劃

- [ ] 整合實際的 AI 平面圖生成模型
- [ ] 3D 視覺化
- [ ] 家具配置建議
- [ ] 成本估算
- [ ] 匯出功能（PDF、CAD）
- [ ] 團隊協作功能
- [ ] 模板庫

## 授權

基於 ChatHouseDiffusion 專案開發
